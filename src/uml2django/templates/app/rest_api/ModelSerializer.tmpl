# Generated by uml2django
# https://github.com/J-hanks/uml2django

#if $model.use_slug
from django.utils.text import slugify
#end if

from rest_framework import serializers

from ${model.app_name}.models import ${model.name}

class ${model.name}Serializer(serializers.ModelSerializer):

    class Meta:
        model = ${model.name}
        fields = [
            #for $field in $model.fields
            '${field.name}',
            #if $model.use_slug
            'slug',
            #end if
            #end for
        ]
        #if $model.use_slug
        read_only_fields = ['slug']
        lookup_field = 'slug'
        extra_kwargs = {
            'url': {'lookup_field': 'slug'}
        }
        #end if

    #if $model.use_slug
    def create(self, validated_data):
        ${model.name_lower} = ${model.name}(**validated_data)
        ${model.name_lower}.slug = slugify(${model.name_lower}.${model.slugify_field})
        ${model.name_lower}.save()
        return ${model.name_lower}
    #end if
